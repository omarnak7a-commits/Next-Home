<!DOCTYPE html>
<html lang="ar" dir="rtl">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Next Home Egypt - تفاصيل الشقة</title>
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link
            href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap"
            rel="stylesheet">
        <link
            href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;500;600;700&display=swap"
            rel="stylesheet">
        <link rel="stylesheet" href="style.css">
    </head>
    <body class="arabic light-mode">
        <!-- Navigation -->
        <!-- Navigation -->
<header>
    <div class="container header-container">
        <a href="index.html" class="logo" id="homeLink">
            <img src="ChatGPT Image 1 أكتوبر 2025، 09_45_25 م.png" alt="nexthome">
            <div class="logo-text">Next<span>Home</span></div>
        </a>
        <nav>
            <ul>
                <li><a href="index.html" class="active" id="navHome">الرئيسية</a></li>
                <li><a href="properties.html" id="navProperties">الشقق</a></li>
                <li><a href="about.html" id="navAbout">عن المنصة</a></li>
                <li><a href="contact.html" id="navContact">اتصل بنا</a></li>
            </ul>
        </nav>
       <div class="auth-buttons">
    <button class="language-toggle" id="langToggle">عربي</button>
    <button class="add-property-btn" id="addPropertyBtn" style="display: none;">
        <i class="fas fa-plus"></i>
    </button>
    <button class="notifications-icon" id="notificationsBtn" style="display: none;">
        <i class="fas fa-bell"></i>
        <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
    </button>
    <button class="settings-icon" id="settingsBtn">
        <i class="fas fa-cog"></i>
    </button>
    <div class="profile-icon" id="profileIcon" style="display: none;">
        <i class="fas fa-user"></i>
    </div>
    <button class="btn btn-outline" id="authBtn">تسجيل الدخول</button>
</div>
    </div>
</header>

            <!-- Property Detail Page -->
            <main class="page active-page" id="propertyDetailPage">
                <section class="section">
                    <div class="container">
                        <div class="property-detail-container">
                            <div class="property-detail-images">
                                <div class="main-image">
                                    <i class="fas fa-home"
                                        style="font-size: 80px; color: var(--nh-secondary);"></i>
                                </div>
                                <div class="thumbnail-images">
                                    <div class="thumbnail active">
                                        <i class="fas fa-bed"></i>
                                    </div>
                                    <div class="thumbnail">
                                        <i class="fas fa-bath"></i>
                                    </div>
                                    <div class="thumbnail">
                                        <i class="fas fa-kitchen-set"></i>
                                    </div>
                                    <div class="thumbnail">
                                        <i class="fas fa-wifi"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="property-detail-info">
                                <h1 id="propertyTitle">شقة طلابية في
                                    القاهرة</h1>
                                <div class="property-location">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span id="propertyLocation">القاهرة الجديدة
                                        - قريب من الجامعة الأمريكية</span>
                                </div>

                                <div class="property-specs">
                                    <div class="spec">
                                        <i class="fas fa-bed"></i>
                                        <span id="bedrooms">غرفتين نوم</span>
                                    </div>
                                    <div class="spec">
                                        <i class="fas fa-bath"></i>
                                        <span id="bathrooms">حمامين</span>
                                    </div>
                                    <div class="spec">
                                        <i class="fas fa-ruler-combined"></i>
                                        <span id="area">80 متر مربع</span>
                                    </div>
                                </div>

                                <div class="property-description">
                                    <h3>وصف الشقة</h3>
                                    <p id="propertyDescription">
                                        شقة طلابية مجهزة بالكامل تقع في منطقة
                                        سكنية آمنة قريبة من الجامعة الأمريكية في
                                        القاهرة الجديدة.
                                        تتميز الشقة بغرفتين نوم واسعتين، حمامين،
                                        مطبخ مجهز، وصالة كبيرة.
                                        الخدمات تشمل الإنترنت عالي السرعة، أمن
                                        على مدار الساعة، وخدمات نظافة أسبوعية.
                                    </p>
                                </div>

                                <div class="property-amenities">
                                    <h3>المرافق</h3>
                                    <ul>
                                        <li><i class="fas fa-check-circle"></i>
                                            إنترنت عالي السرعة</li>
                                        <li><i class="fas fa-check-circle"></i>
                                            أمن على مدار الساعة</li>
                                        <li><i class="fas fa-check-circle"></i>
                                            خدمات نظافة</li>
                                        <li><i class="fas fa-check-circle"></i>
                                            موقف سيارات</li>
                                        <li><i class="fas fa-check-circle"></i>
                                            صالة رياضية</li>
                                        <li><i class="fas fa-check-circle"></i>
                                            غسالة ونشافة</li>
                                    </ul>
                                </div>

                                <div class="property-price-section">
                                    <div class="price">
                                        <span id="propertyPrice">1800 ج.م</span>
                                        <span>/ شهر</span>
                                    </div>
                                    <button class="btn btn-secondary" id="bookNowBtn">احجز الآن</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>

            <!-- Booking Modal -->
            <div class="modal" id="bookingModal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>احجز الشقة</h2>
                    <form id="bookingForm">
                        <div class="form-group">
                            <label for="checkIn">تاريخ البدء</label>
                            <input type="date" id="checkIn" required>
                        </div>
                        <div class="form-group">
                            <label for="duration">مدة الإقامة (أشهر)</label>
                            <select id="duration" required>
                                <option value="1">1 شهر</option>
                                <option value="3">3 أشهر</option>
                                <option value="6">6 أشهر</option>
                                <option value="12">12 شهر</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="studentId">رقم الطالب الجامعي</label>
                            <input type="text" id="studentId"
                                placeholder="أدخل رقمك الجامعي" required>
                        </div>
                        <button type="submit" class="btn btn-primary">تأكيد
                            الحجز</button>
                    </form>
                </div>
            </div>

            <!-- Invoice Modal -->
            <div class="modal" id="invoiceModal">
                <div class="modal-content invoice-content">
                    <span class="close">&times;</span>
                    <div class="invoice-header">
                        <h2>فاتورة دفع</h2>
                        <p>Next Home Egypt</p>
                    </div>
                    <div class="invoice-body">
                        <div class="invoice-info">
                            <p><strong>رقم الفاتورة:</strong> <span
                                    id="invoiceNumber">NH-2025-001</span></p>
                            <p><strong>التاريخ:</strong> <span
                                    id="invoiceDate">15/11/2025</span></p>
                        </div>
                        <div class="invoice-details">
                            <h3>تفاصيل الحجز</h3>
                            <p id="invoiceProperty">شقة طلابية في القاهرة</p>
                            <p id="invoiceDuration">مدة الإقامة: 3 أشهر</p>
                            <p id="invoicePeriod">الفترة: 15/11/2025 -
                                15/02/2026</p>
                        </div>
                        <div class="invoice-total">
                            <p><strong>المبلغ الإجمالي:</strong> <span
                                    id="invoiceTotal">5400 ج.م</span></p>
                        </div>
                    </div>
                    <div class="invoice-footer">
                        <button class="btn btn-secondary"
                            onclick="window.print()">اطبع الفاتورة</button>
                        <button class="btn btn-outline"
                            id="closeInvoice">إغلاق</button>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer>
                <div class="container">
                    <div class="footer-grid">
                        <div class="footer-col">
                            <h3>Next Home</h3>
                            <p>منصة رائدة لتوفير سكن آمن ومريح للطلاب المغتربين
                                في جميع أنحاء مصر. نحن نربط الطلاب بالشقق
                                المثالية القريبة من جامعاتهم ومدارسهم.</p>
                            <div class="social-links">
                                <a href="#"><i
                                        class="fab fa-facebook-f"></i></a>
                                <a href="#"><i class="fab fa-twitter"></i></a>
                                <a href="#"><i class="fab fa-instagram"></i></a>
                                <a href="#"><i class="fab fa-whatsapp"></i></a>
                            </div>
                        </div>
                        <div class="footer-col">
                            <h3>روابط سريعة</h3>
                            <ul>
                                <li><a href="index.html"
                                        id="footerHome">الرئيسية</a></li>
                                <li><a href="properties.html"
                                        id="footerProperties">الشقق</a></li>
                                <li><a href="about.html" id="footerAbout">عن
                                        المنصة</a></li>
                                <li><a href="contact.html"
                                        id="footerContact">اتصل بنا</a></li>
                            </ul>
                        </div>
                        <div class="footer-col">
                            <h3>الجامعات</h3>
                            <ul>
                                <li><a href="#">جامعة القاهرة</a></li>
                                <li><a href="#">جامعة عين شمس</a></li>
                                <li><a href="#">جامعة الإسكندرية</a></li>
                                <li><a href="#">جامعة المنصورة</a></li>
                                <li><a href="#">جامعة أسيوط</a></li>
                            </ul>
                        </div>
                        <div class="footer-col">
                            <h3>اتصل بنا</h3>
                            <ul>
                                <li><i class="fas fa-map-marker-alt"></i>
                                    القاهرة، مصر</li>
                                <li><i class="fas fa-phone"></i> 16588</li>
                                <li><i class="fas fa-envelope"></i>
                                    info@nexthome.eg</li>
                            </ul>
                        </div>
                    </div>
                    <div class="copyright">
                        <p>&copy; 2025 Next Home Egypt. جميع الحقوق محفوظة.</p>
                    </div>
                </div>
            </footer>

            <script>
function generateInvoice() {
    // بيانات الشقة (من الصفحة الحالية)
    const propertyTitle = document.getElementById('propertyTitle').textContent;
    const propertyPrice = document.getElementById('propertyPrice').textContent;
    
    // استخراج السعر الرقمي فقط
    const priceMatch = propertyPrice.match(/(\d+)/);
    const pricePerMonth = priceMatch ? parseInt(priceMatch[1]) : 1800;
    
    // إنشاء فاتورة
    const invoiceHtml = `
        <div style="font-family: Cairo, Arial, sans-serif; max-width: 600px; margin: 20px auto; padding: 20px; border: 2px solid #004d80; border-radius: 10px;">
            <h2 style="text-align: center; color: #004d80; margin-bottom: 20px;">فاتورة دفع</h2>
            <h3 style="text-align: center; color: #ffcc00; margin-bottom: 30px;">Next Home Egypt</h3>
            
            <div style="margin-bottom: 15px;">
                <strong>رقم الفاتورة:</strong> NH-${Date.now().toString().slice(-6)}
            </div>
            <div style="margin-bottom: 15px;">
                <strong>التاريخ:</strong> ${new Date().toLocaleDateString('ar-EG')}
            </div>
            <div style="margin-bottom: 15px;">
                <strong>الشقة:</strong> ${propertyTitle}
            </div>
            
            <div style="margin: 20px 0; padding: 15px; background: #f0f8ff; border-radius: 5px;">
                <h4>تفاصيل الدفع:</h4>
                <p><strong>السعر الشهري:</strong> ${pricePerMonth} ج.م</p>
                <p><strong>المدة:</strong> 3 أشهر (افتراضي)</p>
                <p><strong>إجمالي المبلغ:</strong> ${pricePerMonth * 3} ج.م</p>
            </div>
            
            <div style="text-align: center; font-size: 20px; font-weight: bold; color: #2a9d8f; margin-top: 20px;">
                <strong>تم الدفع بنجاح! ✅</strong>
            </div>
            
            <div style="text-align: center; margin-top: 30px; color: #666;">
                شكراً لثقتكم بـ Next Home Egypt!
            </div>
        </div>
    `;
    
    // إظهار رسالة تأكيد أولًا
    alert('تم الدفع بنجاح! سيتم عرض الفاتورة الآن.');
    
    // عرض الفاتورة في نافذة جديدة
    const invoiceWindow = window.open('', '_blank', 'width=700,height=600');
    invoiceWindow.document.write(`
        <!DOCTYPE html>
        <html dir="rtl">
        <head>
            <meta charset="UTF-8">
            <title>فاتورة Next Home</title>
            <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" rel="stylesheet">
            <style>
                body { margin: 0; padding: 20px; background: white; }
            </style>
        </head>
        <body>
            ${invoiceHtml}
            <div style="text-align: center; margin-top: 20px;">
                <button onclick="window.print()" style="padding: 10px 20px; background: #004d80; color: white; border: none; border-radius: 5px; cursor: pointer; font-family: Cairo, Arial, sans-serif;">طباعة الفاتورة</button>
                <button onclick="window.close()" style="padding: 10px 20px; background: #ffcc00; color: #004d80; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px; font-family: Cairo, Arial, sans-serif;">إغلاق</button>
            </div>
        </body>
        </html>
    `);
    invoiceWindow.document.close();
}
</script>
            <script src="js/property-detail.js"></script>
            <script src="js/main.js"></script>
            <script>
// دالة الحجز المحدثة
function bookProperty() {
    // تحقق من تسجيل الدخول
    const currentUser = localStorage.getItem('currentUser');
    if (!currentUser) {
        alert('يجب تسجيل الدخول أولاً لحجز شقة!');
        window.location.href = 'login.html';
        return;
    }
    
    // بيانات الشقة (من الصفحة الحالية)
    const propertyTitle = document.getElementById('propertyTitle').textContent;
    const propertyPrice = document.getElementById('propertyPrice').textContent;
    
    // استخراج السعر الرقمي فقط
    const priceMatch = propertyPrice.match(/(\d+)/);
    const pricePerMonth = priceMatch ? parseInt(priceMatch[1]) : 1800;
    
    // إنشاء فاتورة
    const invoiceHtml = `
        <div style="font-family: Cairo, Arial, sans-serif; max-width: 600px; margin: 20px auto; padding: 20px; border: 2px solid #004d80; border-radius: 10px;">
            <h2 style="text-align: center; color: #004d80; margin-bottom: 20px;">فاتورة دفع</h2>
            <h3 style="text-align: center; color: #ffcc00; margin-bottom: 30px;">Next Home Egypt</h3>
            
            <div style="margin-bottom: 15px;">
                <strong>رقم الفاتورة:</strong> NH-${Date.now().toString().slice(-6)}
            </div>
            <div style="margin-bottom: 15px;">
                <strong>التاريخ:</strong> ${new Date().toLocaleDateString('ar-EG')}
            </div>
            <div style="margin-bottom: 15px;">
                <strong>الشقة:</strong> ${propertyTitle}
            </div>
            
            <div style="margin: 20px 0; padding: 15px; background: #f0f8ff; border-radius: 5px;">
                <h4>تفاصيل الدفع:</h4>
                <p><strong>السعر الشهري:</strong> ${pricePerMonth} ج.م</p>
                <p><strong>المدة:</strong> 3 أشهر (افتراضي)</p>
                <p><strong>إجمالي المبلغ:</strong> ${pricePerMonth * 3} ج.م</p>
            </div>
            
            <div style="text-align: center; font-size: 20px; font-weight: bold; color: #2a9d8f; margin-top: 20px;">
                <strong>تم الدفع بنجاح! ✅</strong>
            </div>
            
            <div style="text-align: center; margin-top: 30px; color: #666;">
                شكراً لثقتكم بـ Next Home Egypt!
            </div>
        </div>
    `;
    
    // إظهار رسالة تأكيد أولًا
    alert('تم الدفع بنجاح! سيتم عرض الفاتورة الآن.');
    
    // عرض الفاتورة في نافذة جديدة
    const invoiceWindow = window.open('', '_blank', 'width=700,height=600');
    invoiceWindow.document.write(`
        <!DOCTYPE html>
        <html dir="rtl">
        <head>
            <meta charset="UTF-8">
            <title>فاتورة Next Home</title>
            <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" rel="stylesheet">
            <style>
                body { margin: 0; padding: 20px; background: white; }
            </style>
        </head>
        <body>
            ${invoiceHtml}
            <div style="text-align: center; margin-top: 20px;">
                <button onclick="window.print()" style="padding: 10px 20px; background: #004d80; color: white; border: none; border-radius: 5px; cursor: pointer; font-family: Cairo, Arial, sans-serif;">طباعة الفاتورة</button>
                <button onclick="window.close()" style="padding: 10px 20px; background: #ffcc00; color: #004d80; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px; font-family: Cairo, Arial, sans-serif;">إغلاق</button>
            </div>
        </body>
        </html>
    `);
    invoiceWindow.document.close();
    
    // حفظ الحجز
    const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
    bookings.push({
        id: Date.now(),
        userId: JSON.parse(currentUser).id,
        propertyId: propertyTitle,
        checkIn: new Date().toISOString(),
        duration: 3,
        totalPrice: pricePerMonth * 3,
        createdAt: new Date().toISOString()
    });
    localStorage.setItem('bookings', JSON.stringify(bookings));
}

// تفعيل زر الحجز بعد التحقق من تسجيل الدخول
document.addEventListener('DOMContentLoaded', function() {
    const bookBtn = document.getElementById('bookNowBtn');
    if (bookBtn) {
        bookBtn.addEventListener('click', bookProperty);
    }
});
// دالة الحجز المحدثة
function bookProperty() {
    // تحقق من تسجيل الدخول
    const currentUser = localStorage.getItem('currentUser');
    if (!currentUser) {
        alert('يجب تسجيل الدخول أولاً لحجز شقة!');
        window.location.href = 'login.html';
        return;
    }
    
    // بيانات الشقة
    const propertyTitle = document.getElementById('propertyTitle').textContent;
    const propertyPrice = document.getElementById('propertyPrice').textContent;
    const priceMatch = propertyPrice.match(/(\d+)/);
    const pricePerMonth = priceMatch ? parseInt(priceMatch[1]) : 1800;
    const totalPrice = pricePerMonth * 3;
    
    // إنشاء فاتورة (الكود القديم)
    // ... كود الفاتورة ...
    
    // حفظ الحجز
    const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
    bookings.push({
        id: Date.now(),
        userId: JSON.parse(currentUser).id,
        propertyTitle: propertyTitle,
        checkIn: new Date().toISOString(),
        duration: 3,
        totalPrice: totalPrice,
        createdAt: new Date().toISOString()
    });
    localStorage.setItem('bookings', JSON.stringify(bookings));
    
    // إضافة إشعار
    const notifications = JSON.parse(localStorage.getItem('notifications') || '[]');
    notifications.unshift({
        id: Date.now(),
        title: 'تم الحجز بنجاح!',
        message: `تم حجز شقة "${propertyTitle}" بنجاح. المبلغ الإجمالي: ${totalPrice} ج.م`,
        icon: 'fas fa-check-circle',
        timestamp: new Date().toISOString(),
        read: false
    });
    localStorage.setItem('notifications', JSON.stringify(notifications));
    
    alert('تم الحجز بنجاح! تحقق من الإشعارات.');
    window.location.href = 'notifications.html';
}
</script>

        </body>
    </html>
<!DOCTYPE html>
<html lang="ar" dir="rtl">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Next Home Egypt - Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</title>
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link
            href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap"
            rel="stylesheet">
        <link rel="stylesheet" href="style.css">
    </head>
    <body class="arabic light-mode">
        <!-- Navigation -->
        <header>
            <div class="container header-container">
                <a href="index.html" class="logo" id="homeLink">
                    <img src="ChatGPT Image 1 Ø£ÙƒØªÙˆØ¨Ø± 2025ØŒ 09_45_25 Ù….png"
                        alt="Next Home Logo">
                    <div class="logo-text">Next<span>Home</span></div>
                </a>
                <nav>
                    <ul>
                        <li><a href="index.html" id="navHome">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                        <li><a href="properties.html"
                                id="navProperties">Ø§Ù„Ø´Ù‚Ù‚</a></li>
                        <li><a href="about.html" id="navAbout">Ø¹Ù†
                                Ø§Ù„Ù…Ù†ØµØ©</a></li>
                        <li><a href="contact.html" id="navContact">Ø§ØªØµÙ„
                                Ø¨Ù†Ø§</a></li>
                    </ul>
                </nav>
                <div class="auth-buttons">
                    <button class="theme-toggle" id="themeToggle">ğŸŒ™</button>
                    <button class="language-toggle"
                        id="langToggle">Ø¹Ø±Ø¨ÙŠ</button>
                    <button class="btn btn-outline" id="logoutBtn">ØªØ³Ø¬ÙŠÙ„
                        Ø§Ù„Ø®Ø±ÙˆØ¬</button>
                </div>
            </div>
        </header>

        <!-- Profile Page -->
        <main class="page active-page" id="profilePage">
            <section class="section">
                <div class="container">
                    <div class="section-title">
                        <h2>Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</h2>
                        <p>Ø¥Ø¯Ø§Ø±Ø© Ø­Ø³Ø§Ø¨Ùƒ ÙˆØ­Ø¬ÙˆØ²Ø§ØªÙƒ</p>
                    </div>
                    <div class="profile-container">
                        <div class="profile-info">
                            <div class="profile-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="profile-details" id="profileDetails">
                                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¦Ù‡ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                            </div>
                        </div>

                        <div class="profile-sections">
                            <div class="profile-section">
                                <h3>Ø­Ø¬ÙˆØ²Ø§ØªÙŠ</h3>
                                <div id="bookingsList">
                                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¦Ù‡ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                                </div>
                            </div>

                            <div class="profile-section">
                                <h3>ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨</h3>
                                <form id="editProfileForm">
                                    <div class="form-group">
                                        <label for="editName">Ø§Ù„Ø§Ø³Ù…
                                            Ø§Ù„ÙƒØ§Ù…Ù„</label>
                                        <input type="text" id="editName"
                                            required>
                                    </div>
                                    <div class="form-group">
                                        <label for="editEmail">Ø§Ù„Ø¨Ø±ÙŠØ¯
                                            Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                                        <input type="email" id="editEmail"
                                            required>
                                    </div>
                                    <div class="form-group">
                                        <label
                                            for="editUniversity">Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©</label>
                                        <select id="editUniversity" required>
                                            <option value="cairo">Ø¬Ø§Ù…Ø¹Ø©
                                                Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©</option>
                                            <option value="ain-shams">Ø¬Ø§Ù…Ø¹Ø© Ø¹ÙŠÙ†
                                                Ø´Ù…Ø³</option>
                                            <option value="alexandria">Ø¬Ø§Ù…Ø¹Ø©
                                                Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©</option>
                                            <option value="mansoura">Ø¬Ø§Ù…Ø¹Ø©
                                                Ø§Ù„Ù…Ù†ØµÙˆØ±Ø©</option>
                                            <option value="assuit">Ø¬Ø§Ù…Ø¹Ø©
                                                Ø£Ø³ÙŠÙˆØ·</option>
                                            <option value="tanta">Ø¬Ø§Ù…Ø¹Ø©
                                                Ø·Ù†Ø·Ø§</option>
                                            <option value="zagazig">Ø¬Ø§Ù…Ø¹Ø©
                                                Ø§Ù„Ø²Ù‚Ø§Ø²ÙŠÙ‚</option>
                                            <option value="helwan">Ø¬Ø§Ù…Ø¹Ø©
                                                Ø­Ù„ÙˆØ§Ù†</option>
                                            <option value="high-school">Ù…Ø¯Ø±Ø³Ø©
                                                Ø«Ø§Ù†ÙˆÙŠØ©</option>
                                        </select>
                                    </div>
                                    <button type="submit"
                                        class="btn btn-primary">Ø­ÙØ¸
                                        Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <script src="js/main.js"></script>
        <script>
        // Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const profileDetails = document.getElementById('profileDetails');
            const editName = document.getElementById('editName');
            const editEmail = document.getElementById('editEmail');
            const editUniversity = document.getElementById('editUniversity');
            
            if (currentUser) {
                // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                profileDetails.innerHTML = `
                    <h3>${currentUser.name}</h3>
                    <p><strong>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</strong> ${currentUser.email}</p>
                    <p><strong>Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©:</strong> ${currentUser.university}</p>
                    <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„:</strong> ${new Date(currentUser.createdAt).toLocaleDateString('ar-EG')}</p>
                `;
                
                // Ù…Ù„Ø¡ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
                editName.value = currentUser.name;
                editEmail.value = currentUser.email;
                editUniversity.value = currentUser.university;
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
                const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
                const bookingsList = document.getElementById('bookingsList');
                
                if (bookings.length > 0) {
                    bookingsList.innerHTML = bookings
                        .filter(b => b.userId === currentUser.id)
                        .map(booking => `
                            <div class="booking-item">
                                <p><strong>Ø´Ù‚Ø©:</strong> ${booking.propertyId}</p>
                                <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${new Date(booking.checkIn).toLocaleDateString('ar-EG')}</p>
                                <p><strong>Ø§Ù„Ù…Ø¯Ø©:</strong> ${booking.duration} Ø£Ø´Ù‡Ø±</p>
                                <p><strong>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</strong> ${booking.totalPrice} Ø¬.Ù…</p>
                            </div>
                        `).join('');
                } else {
                    bookingsList.innerHTML = '<p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.</p>';
                }
            } else {
                window.location.href = 'login.html';
            }
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function() {
                    localStorage.removeItem('currentUser');
                    alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­!');
                    window.location.href = 'index.html';
                });
            }
            
            // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
            const editForm = document.getElementById('editProfileForm');
            if (editForm) {
                editForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const users = JSON.parse(localStorage.getItem('users') || '{"users":[]}');
                    const userIndex = users.users.findIndex(u => u.id === currentUser.id);
                    
                    if (userIndex !== -1) {
                        users.users[userIndex].name = editName.value;
                        users.users[userIndex].email = editEmail.value;
                        users.users[userIndex].university = editUniversity.value;
                        
                        localStorage.setItem('users', JSON.stringify(users));
                        localStorage.setItem('currentUser', JSON.stringify(users.users[userIndex]));
                        
                        alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ø¨Ù†Ø¬Ø§Ø­!');
                        location.reload();
                    }
                });
            }
        });
    </script>

        <style>
        .profile-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .profile-info {
            text-align: center;
        }
        
        .profile-avatar {
            width: 120px;
            height: 120px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-size: 48px;
        }
        
        .profile-sections {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        .profile-section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: var(--shadow-md);
        }
        
        .dark-mode .profile-section {
            background: var(--card-dark);
        }
        
        .booking-item {
            padding: 15px;
            margin-bottom: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .dark-mode .booking-item {
            background: #2a2a2a;
        }
    </style>
    </body>
</html>